diff --git a/dist/pi-embedded-CAmQsy9D.js b/dist/pi-embedded-CAmQsy9D.js
index 2700d8c554cc21156c34d35213fb6cae75672352..ab8ac82b16eb84100953603e536ac893be8733d0 100644
--- a/dist/pi-embedded-CAmQsy9D.js
+++ b/dist/pi-embedded-CAmQsy9D.js
@@ -46598,7 +46598,7 @@ async function handleDiscordReactionEvent(params) {
 		if (botUserId && user.id === botUserId) return;
 		const isGuildMessage = Boolean(data.guild_id);
 		const guildInfo = isGuildMessage ? resolveDiscordGuildEntry({
-			guild: data.guild ?? void 0,
+			guild: data.guild ?? (data.guild_id ? { id: data.guild_id, name: void 0 } : void 0),
 			guildEntries
 		}) : null;
 		if (isGuildMessage && guildEntries && Object.keys(guildEntries).length > 0 && !guildInfo) return;
@@ -47382,7 +47382,7 @@ async function preflightDiscordMessage(params) {
 		return null;
 	}
 	const guildInfo = isGuildMessage ? resolveDiscordGuildEntry({
-		guild: params.data.guild ?? void 0,
+		guild: params.data.guild ?? (params.data.guild_id ? { id: params.data.guild_id, name: void 0 } : void 0),
 		guildEntries: params.guildEntries
 	}) : null;
 	logDebug(`[discord-preflight] guild_id=${params.data.guild_id} guild_obj=${!!params.data.guild} guild_obj_id=${params.data.guild?.id} guildInfo=${!!guildInfo} guildEntries=${params.guildEntries ? Object.keys(params.guildEntries).join(",") : "none"}`);
@@ -47584,7 +47584,7 @@ async function preflightDiscordMessage(params) {
 	const systemText = resolveDiscordSystemEvent(message, resolveDiscordSystemLocation({
 		isDirectMessage,
 		isGroupDm,
-		guild: params.data.guild ?? void 0,
+		guild: params.data.guild ?? (params.data.guild_id ? { id: params.data.guild_id, name: void 0 } : void 0),
 		channelName: channelName ?? messageChannelId
 	}));
 	if (systemText) {
@@ -48760,7 +48760,7 @@ async function processDiscordMessage(ctx) {
 	});
 	if (statusReactionsEnabled) statusReactions.setQueued();
 	const fromLabel = isDirectMessage ? buildDirectLabel(author) : buildGuildLabel({
-		guild: data.guild ?? void 0,
+		guild: data.guild ?? (data.guild_id ? { id: data.guild_id, name: void 0 } : void 0),
 		channelName: channelName ?? messageChannelId,
 		channelId: messageChannelId
 	});
diff --git a/dist/pi-embedded-DqgaE1xK.js b/dist/pi-embedded-DqgaE1xK.js
index f3a82fc8e482e70ca714101f98f7e0672da0b790..fe5c4399c43f99dfc0a7f59633075589e46aa663 100644
--- a/dist/pi-embedded-DqgaE1xK.js
+++ b/dist/pi-embedded-DqgaE1xK.js
@@ -46596,7 +46596,7 @@ async function handleDiscordReactionEvent(params) {
 		if (botUserId && user.id === botUserId) return;
 		const isGuildMessage = Boolean(data.guild_id);
 		const guildInfo = isGuildMessage ? resolveDiscordGuildEntry({
-			guild: data.guild ?? void 0,
+			guild: data.guild ?? (data.guild_id ? { id: data.guild_id, name: void 0 } : void 0),
 			guildEntries
 		}) : null;
 		if (isGuildMessage && guildEntries && Object.keys(guildEntries).length > 0 && !guildInfo) return;
@@ -47380,7 +47380,7 @@ async function preflightDiscordMessage(params) {
 		return null;
 	}
 	const guildInfo = isGuildMessage ? resolveDiscordGuildEntry({
-		guild: params.data.guild ?? void 0,
+		guild: params.data.guild ?? (params.data.guild_id ? { id: params.data.guild_id, name: void 0 } : void 0),
 		guildEntries: params.guildEntries
 	}) : null;
 	logDebug(`[discord-preflight] guild_id=${params.data.guild_id} guild_obj=${!!params.data.guild} guild_obj_id=${params.data.guild?.id} guildInfo=${!!guildInfo} guildEntries=${params.guildEntries ? Object.keys(params.guildEntries).join(",") : "none"}`);
@@ -47582,7 +47582,7 @@ async function preflightDiscordMessage(params) {
 	const systemText = resolveDiscordSystemEvent(message, resolveDiscordSystemLocation({
 		isDirectMessage,
 		isGroupDm,
-		guild: params.data.guild ?? void 0,
+		guild: params.data.guild ?? (params.data.guild_id ? { id: params.data.guild_id, name: void 0 } : void 0),
 		channelName: channelName ?? messageChannelId
 	}));
 	if (systemText) {
@@ -48758,7 +48758,7 @@ async function processDiscordMessage(ctx) {
 	});
 	if (statusReactionsEnabled) statusReactions.setQueued();
 	const fromLabel = isDirectMessage ? buildDirectLabel(author) : buildGuildLabel({
-		guild: data.guild ?? void 0,
+		guild: data.guild ?? (data.guild_id ? { id: data.guild_id, name: void 0 } : void 0),
 		channelName: channelName ?? messageChannelId,
 		channelId: messageChannelId
 	});
diff --git a/dist/plugin-sdk/reply-CqKtVq5t.js b/dist/plugin-sdk/reply-CqKtVq5t.js
index 0e922763c0208fd0c68861cfceba16f0c21542a3..23f58833dc859292213d7717391b1ba5e84b8641 100644
--- a/dist/plugin-sdk/reply-CqKtVq5t.js
+++ b/dist/plugin-sdk/reply-CqKtVq5t.js
@@ -19483,7 +19483,7 @@ async function handleDiscordReactionEvent(params) {
 		if (botUserId && user.id === botUserId) return;
 		const isGuildMessage = Boolean(data.guild_id);
 		const guildInfo = isGuildMessage ? resolveDiscordGuildEntry({
-			guild: data.guild ?? void 0,
+			guild: data.guild ?? (data.guild_id ? { id: data.guild_id, name: void 0 } : void 0),
 			guildEntries
 		}) : null;
 		if (isGuildMessage && guildEntries && Object.keys(guildEntries).length > 0 && !guildInfo) return;
@@ -20140,7 +20140,7 @@ async function preflightDiscordMessage(params) {
 		return null;
 	}
 	const guildInfo = isGuildMessage ? resolveDiscordGuildEntry({
-		guild: params.data.guild ?? void 0,
+		guild: params.data.guild ?? (params.data.guild_id ? { id: params.data.guild_id, name: void 0 } : void 0),
 		guildEntries: params.guildEntries
 	}) : null;
 	logDebug(`[discord-preflight] guild_id=${params.data.guild_id} guild_obj=${!!params.data.guild} guild_obj_id=${params.data.guild?.id} guildInfo=${!!guildInfo} guildEntries=${params.guildEntries ? Object.keys(params.guildEntries).join(",") : "none"}`);
@@ -20342,7 +20342,7 @@ async function preflightDiscordMessage(params) {
 	const systemText = resolveDiscordSystemEvent(message, resolveDiscordSystemLocation({
 		isDirectMessage,
 		isGroupDm,
-		guild: params.data.guild ?? void 0,
+		guild: params.data.guild ?? (params.data.guild_id ? { id: params.data.guild_id, name: void 0 } : void 0),
 		channelName: channelName ?? messageChannelId
 	}));
 	if (systemText) {
@@ -21644,7 +21644,7 @@ async function processDiscordMessage(ctx) {
 	});
 	if (statusReactionsEnabled) statusReactions.setQueued();
 	const fromLabel = isDirectMessage ? buildDirectLabel(author) : buildGuildLabel({
-		guild: data.guild ?? void 0,
+		guild: data.guild ?? (data.guild_id ? { id: data.guild_id, name: void 0 } : void 0),
 		channelName: channelName ?? messageChannelId,
 		channelId: messageChannelId
 	});
diff --git a/dist/reply-B2UJINPw.js b/dist/reply-B2UJINPw.js
index 94c6af375f9862a1b3aa4bd941da3dd30bcac112..c11b1341cfb35ef261fd02bf6d1d65f167980563 100644
--- a/dist/reply-B2UJINPw.js
+++ b/dist/reply-B2UJINPw.js
@@ -13886,7 +13886,7 @@ async function handleDiscordReactionEvent(params) {
 		if (botUserId && user.id === botUserId) return;
 		const isGuildMessage = Boolean(data.guild_id);
 		const guildInfo = isGuildMessage ? resolveDiscordGuildEntry({
-			guild: data.guild ?? void 0,
+			guild: data.guild ?? (data.guild_id ? { id: data.guild_id, name: void 0 } : void 0),
 			guildEntries
 		}) : null;
 		if (isGuildMessage && guildEntries && Object.keys(guildEntries).length > 0 && !guildInfo) return;
@@ -15510,7 +15510,7 @@ async function preflightDiscordMessage(params) {
 		return null;
 	}
 	const guildInfo = isGuildMessage ? resolveDiscordGuildEntry({
-		guild: params.data.guild ?? void 0,
+		guild: params.data.guild ?? (params.data.guild_id ? { id: params.data.guild_id, name: void 0 } : void 0),
 		guildEntries: params.guildEntries
 	}) : null;
 	logDebug(`[discord-preflight] guild_id=${params.data.guild_id} guild_obj=${!!params.data.guild} guild_obj_id=${params.data.guild?.id} guildInfo=${!!guildInfo} guildEntries=${params.guildEntries ? Object.keys(params.guildEntries).join(",") : "none"}`);
@@ -15712,7 +15712,7 @@ async function preflightDiscordMessage(params) {
 	const systemText = resolveDiscordSystemEvent(message, resolveDiscordSystemLocation({
 		isDirectMessage,
 		isGroupDm,
-		guild: params.data.guild ?? void 0,
+		guild: params.data.guild ?? (params.data.guild_id ? { id: params.data.guild_id, name: void 0 } : void 0),
 		channelName: channelName ?? messageChannelId
 	}));
 	if (systemText) {
@@ -17103,7 +17103,7 @@ async function processDiscordMessage(ctx) {
 	});
 	if (statusReactionsEnabled) statusReactions.setQueued();
 	const fromLabel = isDirectMessage ? buildDirectLabel(author) : buildGuildLabel({
-		guild: data.guild ?? void 0,
+		guild: data.guild ?? (data.guild_id ? { id: data.guild_id, name: void 0 } : void 0),
 		channelName: channelName ?? messageChannelId,
 		channelId: messageChannelId
 	});
diff --git a/dist/subagent-registry-Bdm_X-N1.js b/dist/subagent-registry-Bdm_X-N1.js
index f5edb5ab848058f4daccfe7d50604eee5eb48ae1..51a1c174db2d6b2b2c6ef7ac2a4f333d610700f3 100644
--- a/dist/subagent-registry-Bdm_X-N1.js
+++ b/dist/subagent-registry-Bdm_X-N1.js
@@ -39222,7 +39222,7 @@ async function handleDiscordReactionEvent(params) {
 		if (botUserId && user.id === botUserId) return;
 		const isGuildMessage = Boolean(data.guild_id);
 		const guildInfo = isGuildMessage ? resolveDiscordGuildEntry({
-			guild: data.guild ?? void 0,
+			guild: data.guild ?? (data.guild_id ? { id: data.guild_id, name: void 0 } : void 0),
 			guildEntries
 		}) : null;
 		if (isGuildMessage && guildEntries && Object.keys(guildEntries).length > 0 && !guildInfo) return;
@@ -40006,7 +40006,7 @@ async function preflightDiscordMessage(params) {
 		return null;
 	}
 	const guildInfo = isGuildMessage ? resolveDiscordGuildEntry({
-		guild: params.data.guild ?? void 0,
+		guild: params.data.guild ?? (params.data.guild_id ? { id: params.data.guild_id, name: void 0 } : void 0),
 		guildEntries: params.guildEntries
 	}) : null;
 	logDebug(`[discord-preflight] guild_id=${params.data.guild_id} guild_obj=${!!params.data.guild} guild_obj_id=${params.data.guild?.id} guildInfo=${!!guildInfo} guildEntries=${params.guildEntries ? Object.keys(params.guildEntries).join(",") : "none"}`);
@@ -40208,7 +40208,7 @@ async function preflightDiscordMessage(params) {
 	const systemText = resolveDiscordSystemEvent(message, resolveDiscordSystemLocation({
 		isDirectMessage,
 		isGroupDm,
-		guild: params.data.guild ?? void 0,
+		guild: params.data.guild ?? (params.data.guild_id ? { id: params.data.guild_id, name: void 0 } : void 0),
 		channelName: channelName ?? messageChannelId
 	}));
 	if (systemText) {
@@ -41384,7 +41384,7 @@ async function processDiscordMessage(ctx) {
 	});
 	if (statusReactionsEnabled) statusReactions.setQueued();
 	const fromLabel = isDirectMessage ? buildDirectLabel(author) : buildGuildLabel({
-		guild: data.guild ?? void 0,
+		guild: data.guild ?? (data.guild_id ? { id: data.guild_id, name: void 0 } : void 0),
 		channelName: channelName ?? messageChannelId,
 		channelId: messageChannelId
 	});
